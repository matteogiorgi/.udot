#!/usr/bin/env bash


### Functions definition
########################

if [ -f ~/.bash_functions ]; then
    . ~/.bash_functions
fi




### Greppers
############

echo "$*" | grep "\.ar\." && {
    _xhide xterm -e "${EDITOR:=vi}" "$*" &
    exit
}

echo "$1" | grep "\.sent$" && {
    _xhide sent "$1" &
    exit
}




### MIME-type opener (inode/directory not necessary)
####################################################

case $(file --mime-type "$*" -bL) in
    audio/*)
        FILE=$*
        echo -e "PLAY: ${FILE##*/}\n¯¯¯¯"
        mpv "$FILE"
        ;;
    video/*)
        _xhide "mpv --force-window '$*'"
        ;;
    application/pdf | application/postscript | application/djvu | image/vnd.djvu | application/epub+zip)
        _xhide "zathura '$*'"
        ;;
    image/*)
        _xhide "esxiv '$*'"
        ;;
    *)
        _vim "$*"
        ;;
esac
