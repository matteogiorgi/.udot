#!/usr/bin/env bash

if [[ -x "$(command -v google-chrome)" ]]; then
    BROWSER="google-chrome"
    NAMES="CodeDev\n"$NAMES
elif [[ -x "$(command -v chromium)" ]]; then
    BROWSER="chromium"
    NAMES="CodeDev\n"$NAMES
fi

if [[ -x "$(command -v code)" ]]; then
    NAMES="VSCode\n"$NAMES
elif [[ -x "$(command -v codium)" ]]; then
    NAMES="VSCodium\n"$NAMES
fi

if [[ ! -n $NAMES ]]; then
    dmenu_run -i -b
    exit 0
fi

CHOICE=$(echo -e "$NAMES" | dmenu -i -b | cut -d ':' -f 1)
case "$CHOICE" in
    VSCode)
        code
        ;;
    VSCodium)
        codium
        ;;
    CodeDev)
        $BROWSER --new-window https://vscode.dev
        ;;
    *)
        exit 1
        ;;
esac
