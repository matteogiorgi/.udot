#!/usr/bin/env bash

if [[ -f /bin/fzf ]]; then
    # add `--hidden -g "!.git"` to include hidden files
    export FZF_DEFAULT_COMMAND='rg --sort-files --files --null 2>/dev/null | xargs -0 dirname | uniq -u'
    FILES="$(fzf --prompt="Open: " --border=rounded --margin=5% --color=dark --height 100% --reverse --info=hidden --header-first)" 
    [[ ! -z "$FILES" ]] && exec swallow $FILES
else
    echo "fzf not installed"
fi

unset FILES
unset DIRECTORY
